var Button = ReactBootstrap.Button;
var Glyphicon = ReactBootstrap.Glyphicon;
var Input = ReactBootstrap.Input;
var Modal = ReactBootstrap.Modal;

var App = React.createClass({
    getInitialState: function() {
        return {
            latitude: 39.50,
            longitude: -98.35,
            zoom: 4,
            datasets: [new Dataset("100 Cities", "31.22222 121.45806\n-34.61315 -58.37723\n19.07283 72.88261\n19.42847 -99.12766\n39.9075 116.39723\n24.9056 67.0822\n41.01384 28.94966\n39.14222 117.17667\n23.11667 113.25\n28.65381 77.22897\n14.6042 120.9822\n55.75222 37.61556\n22.54554 114.0683\n23.7104 90.40744\n37.566 126.9784\n-23.5475 -46.63611\n30.58333 114.26667\n6.45306 3.39583\n-6.21462 106.84513\n35.6895 139.69171\n40.71427 -74.00597\n23.04889 113.74472\n25.04776 121.53185\n-4.32758 15.31357\n-12.04318 -77.02824\n30.06263 31.24967\n4.60971 -74.08175\n51.51279 -0.09184\n51.50853 -0.12574\n29.56278 106.55278\n30.66667 104.06667\n32.06167 118.77778\n35.69439 51.42151\n30.79508 106.08473\n22.28552 114.15769\n34.25833 108.92861\n31.54972 74.34361\n41.79222 123.43278\n30.29365 120.16142\n-22.90278 -43.2075\n45.75 126.65\n33.34058 44.40088\n36.18528 117.12\n31.30408 120.59538\n23.36814 116.71479\n13.75398 100.50144\n12.97194 77.59369\n59.93863 30.31413\n-33.45694 -70.64827\n22.56263 88.36304\n-33.86785 151.20732\n43.70011 -79.4163\n16.80528 96.15611\n36.66833 116.99722\n13.08784 80.27847\n34.75778 113.64861\n-37.814 144.96332\n24.68773 46.72185\n43.88 125.32278\n38.91222 121.60222\n22.3384 91.83168\n25.03889 102.71833\n31.21564 29.95527\n34.05223 -118.24368\n23.02579 72.58727\n36.06605 120.36939\n35.10278 129.04028\n5.30966 -4.01266\n12.00012 8.51672\n23.02677 113.13148\n17.38405 78.45636\n29.45679 119.88872\n35.44778 139.6425\n7.38778 3.89639\n1.28967 103.85007\n31.56887 120.28857\n24.47979 118.08187\n39.91987 32.85427\n34.57952 105.74238\n29.87819 121.54945\n10.82302 106.62965\n32.6475 110.77806\n-33.92584 18.42322\n37.86944 112.56028\n52.52437 13.41053\n39.63333 118.18333\n31.86389 117.28083\n45.50884 -73.58781\n40.4165 -3.70256\n39.03385 125.75432\n33.58831 -7.61138\n36.79056 118.06333\n21.31992 110.5723\n-29.8579 31.0292\n28.19874 112.97087\n34.52813 69.17233\n43.80096 87.60046\n10.48801 -66.87919\n18.51957 73.85535\n21.19594 72.83023\n")],
        };
    },
    addDataset: function(dataset) {
        this.setState({
            datasets: this.state.datasets.concat(dataset),
        });
    },
    render: function() {
        return (
            <div>
                <div className="left-sidebar">
                    <DatasetList
                        datasets={this.state.datasets} />
                </div>
                <div className="map-components">
                    <Map
                        latitude={this.state.latitude}
                        longitude={this.state.longitude}
                        zoom={this.state.zoom}
                        datasets={this.state.datasets} />
                </div>
            </div>
        );
    }
});

var theApp;

$(function() {
    theApp = React.render(
        <App />,
        document.getElementById("app")
    );
});
